<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

    <title>Mid AF Official Site</title>
    <meta name="description" content="Official website for Mid AF Technologies.">
    <meta name="keywords" content="Mid AF, hard rock, rock music, metal, mysterious music, music project, band, interactive">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://midaf.tech/">
    <meta property="og:title" content="Mid AF Official Site">
    <meta property="og:description" content="Official website for Mid AF Technologies.">
    <meta property="og:image" content="https://midaf.tech/assets/share-image.jpg">

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://midaf.tech/">
    <meta property="twitter:title" content="Mid AF Official Site">
    <meta property="twitter:description" content="Official website for Mid AF Technologies.">
    <meta property="twitter:image" content="https://midaf.tech/assets/share-image.jpg">

    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@800&display=swap" rel="stylesheet">

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Arial', sans-serif; background: #0a0a0a; color: #d43737; overflow: hidden; position: relative; height: 100dvh; }
        body::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIj48ZmlsdGVyIGlkPSJub2lzZSI+PGZlVHVyYnVsZW5jZSB0eXBlPSJmcmFjdGFsTm9pc2UiIGJhc2VGcmVxdWVuY3k9IjAuOCIgbnVtT2N0YXZlcz0iMyIgc3RpdGNoVGlsZXM9InN0aXRjaCIvPjwvZmlsdGVyPjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIiBmaWx0ZXI9InVybCgjam5vaXNlKSIgb3BhY2l0eT0iMC4wMiIvPjwvc3ZnPg=='); pointer-events: none; z-index: 1; }
        .border { position: absolute; background-color: #d43737; z-index: 10; filter: drop-shadow(0 0 8px rgba(212, 55, 55, 0.7)); }
        .border-top-left { top: 34px; left: 20px; height: 3px; width: calc(50% - 100px); }
        .border-top-right { top: 34px; right: 20px; height: 3px; width: calc(50% - 100px); }
        .border-bottom-left { bottom: 45px; left: 20px; height: 3px; width: calc(50% - 100px); }
        .border-bottom-right { bottom: 45px; right: 20px; height: 3px; width: calc(50% - 100px); }
        .border-left { top: 34px; left: 20px; width: 3px; height: calc(100% - 79px); }
        .border-right { top: 34px; right: 20px; width: 3px; height: calc(100% - 79px); }
        .logo-area { position: absolute; top: 15px; left: 50%; transform: translateX(-50%); width: 109px; height: 50px; z-index: 20; }
        .logo-area img { width: 100%; height: auto; filter: drop-shadow(0 0 8px rgba(212, 55, 55, 0.6)); }
        
        .action-button { position: absolute; bottom: 25px; left: 50%; transform: translateX(-50%); background: linear-gradient(45deg, #a82c2c, #d43737); color: #0a0a0a; border: 1px solid rgba(212, 55, 55, 0.5); padding: 12px 35px; font-size: 16px; font-weight: bold; letter-spacing: 3px; border-radius: 6px; cursor: pointer; transition: all 0.3s ease; z-index: 20; box-shadow: 0 4px 15px rgba(212, 55, 55, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2); }
        .action-button:hover { transform: translateX(-50%) translateY(-2px); background: linear-gradient(45deg, #d43737, #f43f3f); box-shadow: 0 6px 20px rgba(212, 55, 55, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.3); }
        
        /* --- CHANGE: New styles for the side MUSIC button --- */
        .side-button {
            position: absolute;
            top: 50%;
            right: 40px; /* Positioned outside the red border */
            transform: translateY(-50%);
            display: inline-block;
            text-decoration: none;
            background: linear-gradient(45deg, #a88a2c, #d4af37);
            color: #0a0a0a;
            border: 1px solid rgba(212, 175, 55, 0.5);
            padding: 12px 35px;
            font-size: 16px;
            font-weight: bold;
            letter-spacing: 3px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 20;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }
        .side-button:hover {
            transform: translateY(-50%) translateX(-2px);
            background: linear-gradient(45deg, #d4af37, #f4d03f);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        
        #three-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 5; }
        #loading { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 18px; z-index: 30; }
        #cookie-banner { position: fixed; bottom: -100%; left: 0; width: 100%; background: rgba(10, 10, 10, 0.85); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); color: #ccc; padding: 15px; text-align: center; z-index: 1000; font-size: 14px; transition: bottom 0.5s ease-in-out; display: flex; justify-content: center; align-items: center; }
        #cookie-banner.visible { bottom: 0; }
        #cookie-banner p { margin: 0 15px 0 0; }
        #cookie-banner button { background: #d43737; color: #0a0a0a; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-weight: bold; transition: background 0.3s; }
        #cookie-banner button:hover { background: #f43f3f; }

        @media (max-width: 768px) {
            .border-top-left, .border-top-right, .border-bottom-left, .border-bottom-right { width: calc(50% - 80px); }
            .logo-area { width: 90px; height: auto; top: 25px; }
            
            .action-button {
                left: auto;
                right: 20px;
                transform: none;
                padding: 10px 25px; 
                font-size: 14px; 
                bottom: 22px;
            }
            .side-button {
                top: auto;
                bottom: 22px;
                right: auto;
                left: 20px;
                transform: none;
                padding: 10px 25px;
                font-size: 14px;
            }

            #cookie-banner { flex-direction: column; }
            #cookie-banner p { margin: 0 0 10px 0; }
        }
    </style>
</head>

<body>
    <div class="border border-top-left"></div>
    <div class="border border-top-right"></div>
    <div class="border border-bottom-left"></div>
    <div class="border border-bottom-right"></div>
    <div class="border border-left"></div>
    <div class="border border-right"></div>
    <div class="logo-area">
        <img src="assets/logo.png" alt="Mid AF Technologies Logo">
    </div>

    <a href="https://music.midaf.tech" target="_blank" rel="noopener noreferrer" class="side-button">MUSIC</a>

    <div id="loading">LOADING...</div>
    <canvas id="three-canvas"></canvas>
    
    <button class="action-button">???</button>

    <div id="cookie-banner">
        <p>This site does not use cookies or track you in any way. We value your privacy.</p>
        <button id="cookie-accept">OK</button>
    </div>

    <script type="importmap">
        { "imports": { "three": "https://unpkg.com/three@0.158.0/build/three.module.js", "three/addons/": "https://unpkg.com/three@0.158.0/examples/jsm/" } }
    </script>

    <script type="module">
        // The JavaScript remains the same.
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

        function handleCookieBanner() {
            const banner = document.getElementById('cookie-banner');
            const acceptBtn = document.getElementById('cookie-accept');
            if (localStorage.getItem('privacyPolicyAccepted') !== 'true') {
                setTimeout(() => { banner.classList.add('visible'); }, 1500);
            }
            acceptBtn.addEventListener('click', () => {
                banner.classList.remove('visible');
                localStorage.setItem('privacyPolicyAccepted', 'true');
            });
        }

        let scene, camera, renderer, computer, dustParticles, staticMaterial;
        const clock = new THREE.Clock();

        function init() {
            handleCookieBanner();
            scene = new THREE.Scene();
            scene.fog = new THREE.Fog(0x0a0a0a, 5, 20);
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 3.5;
            renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('three-canvas'), antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            renderer.outputColorSpace = THREE.SRGBColorSpace;
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1.2;
            setupLighting();
            loadComputerModel();
            createDustParticles();
            setupEventListeners();
            animate();
        }

        function setupLighting() {
            const ambientLight = new THREE.AmbientLight(0x404040, 1.0);
            scene.add(ambientLight);
            const keyLight = new THREE.DirectionalLight(0xffffff, 1.5);
            keyLight.position.set(5, 5, 5);
            scene.add(keyLight);
            const rimLight = new THREE.DirectionalLight(0xd43737, 1.0);
            rimLight.position.set(-5, 0, -3);
            scene.add(rimLight);
            const fillLight = new THREE.HemisphereLight(0xffffff, 0x404040, 0.5);
            scene.add(fillLight);
        }

        function loadComputerModel() {
            staticMaterial = new THREE.ShaderMaterial({
                uniforms: { time: { value: 0.0 }, intensity: { value: 0.8 } },
                vertexShader: `varying vec2 vUv; void main() { vUv = uv; gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }`,
                fragmentShader: `uniform float time; uniform float intensity; varying vec2 vUv; float random(vec2 p) { return fract(sin(dot(p.xy, vec2(12.9898, 78.233))) * 43758.5453123); } void main() { float crunchiness = 64.0; vec2 crunchyUv = floor(vUv * crunchiness) / crunchiness; float noise = random(crunchyUv + time) * intensity; float scanline = sin(vUv.y * 400.0) * 0.08; vec3 color = vec3(noise + scanline); gl_FragColor = vec4(color, 1.0); }`
            });

            const loader = new GLTFLoader();
            const loadingIndicator = document.getElementById('loading');

            loader.load('assets/computer/computer.gltf', (gltf) => {
                computer = gltf.scene;

                computer.rotation.y = -Math.PI / 2;
                computer.rotation.x = 0.2; 

                const boxForScaling = new THREE.Box3().setFromObject(computer);
                const size = boxForScaling.getSize(new THREE.Vector3());
                const maxDim = Math.max(size.x, size.y, size.z);
                const scale = 2.5 / maxDim;
                computer.scale.set(scale, scale, scale);
                
                let screenCenterOffset = new THREE.Vector3();
                let screenMeshFound = false;

                computer.traverse((child) => {
                    if (child.isMesh && child.material.name === 'BasicShapeMaterial') {
                        child.material = staticMaterial;
                        const screenBox = new THREE.Box3().setFromObject(child);
                        screenBox.getCenter(screenCenterOffset);
                        screenMeshFound = true;
                    }
                });
                
                if (!screenMeshFound) {
                    console.warn("Screen mesh not found. Centering on the whole object.");
                    new THREE.Box3().setFromObject(computer).getCenter(screenCenterOffset);
                }

                computer.position.sub(screenCenterOffset);
                computer.position.y -= 0.15;

                scene.add(computer);
                loadingIndicator.style.display = 'none';

            }, undefined, (error) => {
                console.error('An error happened loading the model:', error);
                loadingIndicator.textContent = 'ERROR LOADING MODEL';
            });
        }

        function createDustParticles() {
            const dustGeometry = new THREE.BufferGeometry(); const dustCount = 6000; const positions = new Float32Array(dustCount * 3); for (let i = 0; i < dustCount; i++) { const i3 = i * 3; positions[i3] = (Math.random() - 0.5) * 20; positions[i3 + 1] = (Math.random() - 0.5) * 15; positions[i3 + 2] = (Math.random() - 0.5) * 15; } dustGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3)); const dustMaterial = new THREE.PointsMaterial({ color: 0xcccccc, size: 0.015, transparent: true, opacity: 0.25, blending: THREE.AdditiveBlending, sizeAttenuation: true }); dustParticles = new THREE.Points(dustGeometry, dustMaterial); scene.add(dustParticles);
        }

        function setupEventListeners() {
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }

        function animate() {
            requestAnimationFrame(animate);
            const elapsedTime = clock.getElapsedTime();

            if (staticMaterial) {
                staticMaterial.uniforms.time.value = elapsedTime * 0.1;
            }

            if (dustParticles) {
                dustParticles.rotation.y = elapsedTime * 0.05;
                dustParticles.rotation.x = elapsedTime * 0.02;
            }
            renderer.render(scene, camera);
        }

        init();
    </script>
</body>

</html>